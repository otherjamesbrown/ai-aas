# AI-AAS Platform

> Spec-driven repository for an inference-as-a-service platform built on Akamai Linode infrastructure with Go-based microservices, GitHub Actions automation, and declarative GitOps workflows.

This file highlights the most relevant specifications, plans, and external references so agents can reason about the project without crawling the entire repository.

## ⚠️ Critical GitHub Actions Guidelines

**MUST FOLLOW** when working with workflows:
- Reusable workflows MUST be at `.github/workflows/` top level (no subdirectories)
- Never use `${{ env.VAR }}` in reusable workflow call parameters (use hardcoded values)
- Always declare job dependencies in `needs:` if accessing outputs
- Scripts must be executable: `chmod +x` before committing
- Workflows must exist on `main` before `workflow_dispatch` works on feature branches
- See `docs/platform/github-actions-guide.md` for complete guide

## Core Specs

- [000 Project Setup Spec](./specs/000-project-setup/spec.md): Repository structure, automation requirements, remote CI workflow (`make ci-remote`).
- [000 Plan](./specs/000-project-setup/plan.md): Tooling choices (Go 1.21, GNU Make 4.x, GitHub Actions, Linode S3-compatible storage) and structure decisions.
- [000 Quickstart](./specs/000-project-setup/quickstart.md): Onboarding steps, remote CI usage, metrics workflow, Linode API pointers.
- [001 Infrastructure Spec](./specs/001-infrastructure/spec.md): Multi-environment LKE provisioning, security baseline, observability, and rollback requirements.
- [001 Plan](./specs/001-infrastructure/plan.md): Terraform/Helm architecture, GitOps flow, directory layout, and constitution compliance for infrastructure.
- [001 Quickstart](./specs/001-infrastructure/quickstart.md): Terraform/Helm bootstrap, secrets sync, sample service validation, rollback procedures.
- [001 Contracts](./specs/001-infrastructure/contracts/): Access package schema, Terraform module interface, environment handoff OpenAPI.
- [001 Tasks](./specs/001-infrastructure/tasks.md): Executable backlog covering provisioning pipelines, observability baselines, security guardrails, and rollback drills.
- [001 Research & Data Model](./specs/001-infrastructure/research.md), (./specs/001-infrastructure/data-model.md): Provider selections, secrets strategy, entity relationships, environment lifecycle.
- [003 Database Schemas Spec](./specs/003-database-schemas/spec.md): Operational + analytics schema scope, guardrails, keyed hashing (HMAC) requirements, telemetry, dual-approval workflows.
- [003 Plan](./specs/003-database-schemas/plan.md): Toolchain decisions (`golang-migrate`, OTEL hooks, remote DB strategy), repo layout (`db/`, `analytics/`, `scripts/`), constitution mapping.
- [003 Tasks](./specs/003-database-schemas/tasks.md): Dependency-ordered backlog across setup, guardrails, user stories, polish; includes analytics + CI follow-up work.
- [003 Quickstart](./specs/003-database-schemas/quickstart.md): Remote DB bootstrap, migration/seeding scripts, rollup execution (`make analytics-rollup-run`, `make analytics-verify`), apply→rollback drills.
- [003 Research & Data Model](./specs/003-database-schemas/research.md), (./specs/003-database-schemas/data-model.md): Migration tool evaluation, entity catalog (organizations, usage events, rollups, audit log).
- [003 Contracts](./specs/003-database-schemas/contracts/schema-management.yaml): Schema management API surface for automation.
- [DB Migrations Runbook](./docs/runbooks/migrations.md): Operational playbook for approvals, telemetry, smoke tests, remote DB usage.
- [002 Local Dev Environment Spec](./specs/002-local-dev-environment/spec.md): Local and remote development environment setup, TTL enforcement, lifecycle management, and component health checks.
- [002 Local Dev Environment Plan](./specs/002-local-dev-environment/plan.md): Terraform module architecture, Docker Compose stack design, lifecycle scripts, and tooling decisions for dev environments.
- [002 Local Dev Environment Quickstart](./specs/002-local-dev-environment/quickstart.md): Step-by-step setup for remote workspace provisioning, local stack fallback, TTL automation, secrets rotation, and lifecycle troubleshooting.
- [002 Local Dev Environment Tasks](./specs/002-local-dev-environment/tasks.md): Phase-by-phase implementation backlog covering setup through polish (Phases 1-7).
- [002 Local Dev Environment Contracts](./specs/002-local-dev-environment/contracts/dev-environment-contracts.md): Dev environment API surface for automation and tooling integration.
- [Dev Environment CI Workflow](./.github/workflows/dev-environment-ci.yml): CI validation for Go formatting/tests, Terraform fmt/validate, shell linting, and startup measurement scripts.
- [Service Dev Connect Runbook](./docs/runbooks/service-dev-connect.md): Detailed connectivity troubleshooting, port conflict remediation, and service configuration guide.
- [Data Classification Policy](./docs/platform/data-classification.md): Data retention policies for dev environments (90-day logs, 24-hour workspace TTL).
- [Shared Libraries Quickstart](./specs/004-shared-libraries/quickstart.md): Integration flow for Go/TS consumers, verification scripts, performance benchmark commands.
- [Shared Libraries Tasks](./specs/004-shared-libraries/tasks.md): Phase backlog covering setup through pilot adoption.
- [Shared Libraries Runbook](./docs/runbooks/shared-libraries.md): Telemetry/health troubleshooting, version skew guidance, pilot follow-ups.
- [Shared Libraries Performance Benchmarks](./docs/perf/shared-libraries.md): Baselines and CI artifact references.
- [Shared Libraries Pilot Plan](./docs/adoption/pilot-plan.md) & [Results](./docs/adoption/pilot-results.md): Phase 7 adoption strategy and measurement template.
- [Analytics Transforms](./analytics/transforms/): Hourly + daily rollup SQL, adapter config for default vs warehouse targets.
- [Analytics Tests](./analytics/tests/): Reconciliation checks ensuring rollups match raw usage (hourly + daily, configurable test window).
- [007 Analytics Service Spec](./specs/007-analytics-service/spec.md): Analytics ingestion, aggregation, and querying service with usage visibility, reliability metrics, and finance-friendly CSV exports.
- [007 Analytics Service Quickstart](./specs/007-analytics-service/quickstart.md): Local development setup, API usage examples, Kubernetes deployment, and troubleshooting guide.
- [007 Analytics Service Tasks](./specs/007-analytics-service/tasks.md): Phase-by-phase implementation backlog covering setup through polish (Phases 1-6).
- [007 Analytics Service Handoff P5](./services/analytics-service/handoff-007-P05.md): Phase 5 handoff document for finance-friendly CSV exports with S3 delivery.
- [007 Analytics Service Handoff P6](./services/analytics-service/handoff-007-P06.md): Phase 6 handoff document for RBAC middleware, audit logging, and performance benchmarks.
- [Analytics Service Runbook](./docs/runbooks/analytics-incident-response.md): Incident response procedures for error rates, latency, freshness lag, and export job troubleshooting.
- [Analytics Service Performance Benchmarks](./services/analytics-service/test/perf/freshness_benchmark_test.go): Performance benchmarks for rollup queries, CSV generation, and freshness cache operations.
- [009 Admin CLI Spec](./specs/009-admin-cli/spec.md): Command-line tool for platform administrators to perform privileged operations (bootstrap, org/user management, credential rotation, sync triggers, exports) with dry-run, confirmations, and structured output.
- [009 Admin CLI Plan](./specs/009-admin-cli/plan.md): Go-based CLI using Cobra framework, service API clients (user-org-service, analytics-service), audit logging, and health checks for service dependencies.
- [009 Admin CLI Quickstart](./specs/009-admin-cli/quickstart.md): CLI installation, bootstrap procedures, daily operations (org/user management, batch operations, exports), scripting integration, and troubleshooting guide.
- [Remote CI Runbook](./docs/runbooks/ci-remote.md): Step-by-step guide for `make ci-remote`, expected SLA, troubleshooting.
- [Service Automation Guide](./docs/services/customizing.md): Shared Make template hooks, flags, and customization patterns.
- Sample services: `hello-service` (CLI greeting) and `world-service` (HTTP JSON endpoint) demonstrate build/test/check workflows.
- [Constitution](./memory/constitution.md): Non-negotiable architecture principles (API-first, LKE Kubernetes, GitOps, security gates).

## External References

- [Linode Kubernetes Engine API](https://techdocs.akamai.com/linode-api/reference/post-lke-cluster): Cluster provisioning for platform environments.
- [Linode Instance API](https://techdocs.akamai.com/linode-api/reference/post-linode-instance): VM provisioning standards.
- [Linode Object Storage API](https://techdocs.akamai.com/linode-api/reference/post-object-storage-bucket): Metrics bucket creation and lifecycle rules.
- [Linode CLI LKE Commands](https://techdocs.akamai.com/cloud-computing/docs/lke-commands): Reference for managing clusters via `linode-cli`.
- [Terraform Linode Provider](https://registry.terraform.io/providers/linode/linode/latest/docs): Resource definitions for clusters, node pools, networking, and buckets.
- [ArgoCD Documentation](https://argo-cd.readthedocs.io/en/stable/): GitOps controller used for Helm/app reconciliation.
- [Bitnami Sealed Secrets](https://github.com/bitnami-labs/sealed-secrets): Secret encryption workflow for environment bundles.
- [kube-prometheus-stack](https://artifacthub.io/packages/helm/prometheus-community/kube-prometheus-stack): Metrics/logs/traces baseline deployed per environment.
- [llms.txt Specification](https://llmstxt.org/): Format guidelines followed by this file.

## Optional

- [Linode API Overview](https://techdocs.akamai.com/linode-api/reference/api): Unified reference for all Akamai Linode endpoints.

